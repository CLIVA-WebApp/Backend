{"openapi":"3.1.0","info":{"title":"Health Access Analysis and Optimization API","description":"API for analyzing health access patterns and optimizing facility placement in Indonesia","version":"1.0.0"},"paths":{"/api/v1/auth/google":{"get":{"tags":["Authentication"],"summary":"Redirect to Google OAuth","description":"Redirect to Google OAuth - backend handles the entire flow","operationId":"redirect_to_google_api_v1_auth_google_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/auth/google/callback":{"get":{"tags":["Authentication"],"summary":"OAuth Callback","description":"Handle OAuth callback and set session cookie","operationId":"google_callback_api_v1_auth_google_callback_get","parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string","title":"Code"}},{"name":"state","in":"query","required":false,"schema":{"type":"string","title":"State"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/register":{"post":{"tags":["Authentication"],"summary":"Register User","description":"Register a new user with email/password","operationId":"register_user_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegister"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["Authentication"],"summary":"Login User","description":"Login user with email/password","operationId":"login_user_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/change-password":{"post":{"tags":["Authentication"],"summary":"Change Password","description":"Change user password","operationId":"change_password_api_v1_auth_change_password_post","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordChange"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/session/verify":{"get":{"tags":["Authentication"],"summary":"Verify Session","description":"Verify session and return user data","operationId":"verify_session_api_v1_auth_session_verify_get","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/me":{"get":{"tags":["Authentication"],"summary":"Get Current User","description":"Get current authenticated user profile information","operationId":"get_current_user_profile_api_v1_auth_me_get","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["Authentication"],"summary":"Logout User","description":"Logout user by clearing session cookie","operationId":"logout_api_v1_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/auth/location":{"put":{"tags":["Authentication"],"summary":"Update User Location","description":"Update user location (address and/or geometry)","operationId":"update_user_location_api_v1_auth_location_put","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLocationUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/name":{"put":{"tags":["Authentication"],"summary":"Update User Name","description":"Update user name (first_name and last_name) - OAuth users cannot update names","operationId":"update_user_name_api_v1_auth_name_put","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNameUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/regions/provinces":{"get":{"tags":["Regions"],"summary":"Get All Provinces","description":"Retrieve a list of all provinces in Indonesia. This endpoint provides foundational data for the frontend dropdown selection.","operationId":"get_provinces_api_v1_regions_provinces_get","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProvinceListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/regions/regencies":{"get":{"tags":["Regions"],"summary":"Get Regencies by Province","description":"Retrieve all regencies (Kabupaten/Kota) within a specific province. This is the next step in the user's journey, narrowing down the area of interest.","operationId":"get_regencies_api_v1_regions_regencies_get","parameters":[{"name":"province_id","in":"query","required":true,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"string"}],"description":"ID of the province to get regencies for (use 'mock' for testing)","title":"Province Id"},"description":"ID of the province to get regencies for (use 'mock' for testing)"},{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegencyListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/regions/subdistricts":{"get":{"tags":["Regions"],"summary":"Get Sub-districts by Regency","description":"Retrieve all sub-districts (Kecamatan) within a specific regency. This provides detailed administrative boundaries for analysis.","operationId":"get_subdistricts_api_v1_regions_subdistricts_get","parameters":[{"name":"regency_id","in":"query","required":true,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"string"}],"description":"ID of the regency to get sub-districts for (use 'mock' for testing)","title":"Regency Id"},"description":"ID of the regency to get sub-districts for (use 'mock' for testing)"},{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubDistrictListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/regions/facilities":{"get":{"tags":["Regions"],"summary":"Get Facilities by Regency","description":"Retrieve all health facilities within a specific regency. This provides the existing healthcare landscape for analysis and visualization.","operationId":"get_facilities_api_v1_regions_facilities_get","parameters":[{"name":"regency_id","in":"query","required":true,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"string"}],"description":"ID of the regency to get facilities for (use 'mock' for testing)","title":"Regency Id"},"description":"ID of the regency to get facilities for (use 'mock' for testing)"},{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FacilityListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/heatmap":{"get":{"tags":["Analysis"],"summary":"Get Health Access Heatmap","description":"Calculate and return data needed to generate the Health Access Heatmap for a chosen regency. The calculation is based on the proportion of the population living outside a defined service radius of the nearest health facility.","operationId":"get_heatmap_api_v1_analysis_heatmap_get","parameters":[{"name":"regency_id","in":"query","required":true,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"string"}],"description":"ID of the regency for heatmap analysis (use 'mock' for testing)","title":"Regency Id"},"description":"ID of the regency for heatmap analysis (use 'mock' for testing)"},{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HeatmapData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/priority-score":{"get":{"tags":["Analysis"],"summary":"Get Equity Prioritization Score","description":"Deliver the Equity Prioritization Score. This endpoint returns a ranked list of sub-districts based on the composite score defined in the project brief (Gap Factor, Efficiency Factor, Vulnerability Factor).","operationId":"get_priority_score_api_v1_analysis_priority_score_get","parameters":[{"name":"regency_id","in":"query","required":true,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"string"}],"description":"ID of the regency for priority score analysis (use 'mock' for testing)","title":"Regency Id"},"description":"ID of the regency for priority score analysis (use 'mock' for testing)"},{"name":"service_radius_km","in":"query","required":false,"schema":{"type":"number","maximum":50.0,"minimum":0.1,"description":"Service radius in kilometers (0.1-50.0)","default":5.0,"title":"Service Radius Km"},"description":"Service radius in kilometers (0.1-50.0)"},{"name":"gap_weight","in":"query","required":false,"schema":{"type":"number","maximum":1.0,"minimum":0.0,"description":"Weight for gap factor (0.0-1.0)","default":0.4,"title":"Gap Weight"},"description":"Weight for gap factor (0.0-1.0)"},{"name":"efficiency_weight","in":"query","required":false,"schema":{"type":"number","maximum":1.0,"minimum":0.0,"description":"Weight for efficiency factor (0.0-1.0)","default":0.3,"title":"Efficiency Weight"},"description":"Weight for efficiency factor (0.0-1.0)"},{"name":"vulnerability_weight","in":"query","required":false,"schema":{"type":"number","maximum":1.0,"minimum":0.0,"description":"Weight for vulnerability factor (0.0-1.0)","default":0.3,"title":"Vulnerability Weight"},"description":"Weight for vulnerability factor (0.0-1.0)"},{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PriorityScoreData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/subdistrict-details":{"get":{"tags":["Analysis"],"summary":"Get Sub-district Details","description":"Retrieve detailed statistics for a specific sub-district including population, area, poverty rate, existing facilities, and calculated scores.","operationId":"get_subdistrict_details_api_v1_analysis_subdistrict_details_get","parameters":[{"name":"subdistrict_id","in":"query","required":true,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"string"}],"description":"ID of the sub-district for detailed analysis (use 'mock' for testing)","title":"Subdistrict Id"},"description":"ID of the sub-district for detailed analysis (use 'mock' for testing)"},{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubDistrictDetails"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/summary":{"get":{"tags":["Analysis"],"summary":"Get Analysis Summary","description":"Get a comprehensive analysis summary for a regency including coverage metrics, average distances, and facility overview.","operationId":"get_analysis_summary_api_v1_analysis_summary_get","parameters":[{"name":"regency_id","in":"query","required":true,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"string"}],"description":"ID of the regency for summary analysis (use 'mock' for testing)","title":"Regency Id"},"description":"ID of the regency for summary analysis (use 'mock' for testing)"},{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisSummary"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/cache/clear":{"delete":{"tags":["Analysis"],"summary":"Clear Analysis Cache","description":"Clear all analysis cache or cache for a specific regency.","operationId":"clear_analysis_cache_api_v1_analysis_cache_clear_delete","parameters":[{"name":"regency_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional regency ID to clear cache for specific regency","title":"Regency Id"},"description":"Optional regency ID to clear cache for specific regency"},{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/cache/stats":{"get":{"tags":["Analysis"],"summary":"Get Cache Statistics","description":"Get cache statistics and status.","operationId":"get_cache_stats_api_v1_analysis_cache_stats_get","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/simulation/run":{"post":{"tags":["Simulation"],"summary":"Run Simulation","description":"Run a simulation for healthcare facility placement optimization.\n\nThis endpoint runs a greedy algorithm to optimize healthcare facility placement\nwithin specified areas, considering budget constraints and selected facility types.\n\nArgs:\n    simulation_request: SimulationRequest containing geographic_level, area_ids, budget, and facility_types\n    current_user: Authenticated user (from access token)\n    \nReturns:\n    SimulationResponse with simulation summary and recommendations","operationId":"run_simulation_api_v1_simulation_run_post","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulationRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/simulation/run-legacy":{"post":{"tags":["Simulation"],"summary":"Run Legacy Simulation","description":"Legacy simulation endpoint for backward compatibility.\n\nThis endpoint runs a greedy algorithm to optimize healthcare facility placement\nwithin a given regency, considering budget constraints and population coverage.\n\nArgs:\n    budget: Total budget available for facility construction\n    regency_id: ID of the regency to analyze\n    current_user: Authenticated user (from access token)\n    \nReturns:\n    LegacySimulationResponse with optimized facility recommendations and impact summary","operationId":"run_legacy_simulation_api_v1_simulation_run_legacy_post","parameters":[{"name":"budget","in":"query","required":true,"schema":{"type":"number","title":"Budget"}},{"name":"regency_id","in":"query","required":true,"schema":{"type":"string","title":"Regency Id"}},{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LegacySimulationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reports/export":{"post":{"tags":["Reports"],"summary":"Export Report","description":"Generate a downloadable report (PDF/CSV) from analysis or simulation results. This endpoint takes the JSON output from a simulation or analysis endpoint and creates a formatted report.","operationId":"export_report_api_v1_reports_export_post","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportExportRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportExportResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbot/start_chat":{"post":{"tags":["Chatbot"],"summary":"Start Chat","description":"Start a new chat session with the Ceeva chatbot.\n\nThis endpoint initializes a chat session and returns recent simulation results\nfor the authenticated user, along with an initial greeting and suggested actions.\n\nArgs:\n    current_user: Authenticated user (from access token)\n    \nReturns:\n    StartChatResponse with greeting, recent simulations, and suggested actions","operationId":"start_chat_api_v1_chatbot_start_chat_post","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbot/assist":{"post":{"tags":["Chatbot"],"summary":"Assist User","description":"Get assistance from the Ceeva chatbot.\n\nThis endpoint processes user messages and returns intelligent responses\nbased on simulation data and conversation context.\n\nArgs:\n    request: ChatbotRequest containing user message and session context\n    current_user: Authenticated user (from access token)\n    \nReturns:\n    ChatbotResponse with bot response and suggested actions","operationId":"assist_user_api_v1_chatbot_assist_post","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"type":"string","title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AnalysisSummary":{"properties":{"regency_name":{"type":"string","title":"Regency Name","description":"Name of the regency"},"summary_metrics":{"$ref":"#/components/schemas/SummaryMetrics","description":"Summary metrics for the regency"},"facility_overview":{"items":{"$ref":"#/components/schemas/FacilityOverview"},"type":"array","title":"Facility Overview","description":"Overview of health facilities in the regency"}},"type":"object","required":["regency_name","summary_metrics","facility_overview"],"title":"AnalysisSummary"},"ChatbotRequest":{"properties":{"user_message":{"type":"string","title":"User Message","description":"User's message to the chatbot"},"session_context":{"anyOf":[{"$ref":"#/components/schemas/SessionContext"},{"type":"null"}],"description":"Optional session context including previous messages and simulation results"}},"type":"object","required":["user_message"],"title":"ChatbotRequest"},"ChatbotResponse":{"properties":{"bot_response":{"type":"string","title":"Bot Response","description":"Chatbot's response to the user"},"suggested_actions":{"items":{"$ref":"#/components/schemas/SuggestedAction"},"type":"array","title":"Suggested Actions","description":"List of suggested actions for the user","default":[]}},"type":"object","required":["bot_response"],"title":"ChatbotResponse"},"Coordinates":{"properties":{"lat":{"type":"number","title":"Lat","description":"Latitude coordinate"},"lon":{"type":"number","title":"Lon","description":"Longitude coordinate"}},"type":"object","required":["lat","lon"],"title":"Coordinates"},"FacilityListResponse":{"properties":{"facilities":{"items":{"$ref":"#/components/schemas/FacilitySchema"},"type":"array","title":"Facilities"},"total":{"type":"integer","title":"Total","description":"Total number of facilities"},"regency_id":{"type":"string","format":"uuid","title":"Regency Id","description":"ID of the regency"}},"type":"object","required":["facilities","total","regency_id"],"title":"FacilityListResponse"},"FacilityOverview":{"properties":{"id":{"type":"string","format":"uuid","title":"Id","description":"ID of the health facility"},"name":{"type":"string","title":"Name","description":"Name of the health facility"},"type":{"type":"string","title":"Type","description":"Type of health facility"},"rating":{"type":"number","title":"Rating","description":"Rating of the facility (0-5 scale)"}},"type":"object","required":["id","name","type","rating"],"title":"FacilityOverview"},"FacilitySchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id","description":"Unique identifier for the facility"},"name":{"type":"string","title":"Name","description":"Name of the facility"},"type":{"type":"string","title":"Type","description":"Type of health facility (e.g., puskesmas, hospital, clinic)"},"latitude":{"type":"number","title":"Latitude","description":"Latitude coordinate"},"longitude":{"type":"number","title":"Longitude","description":"Longitude coordinate"},"regency_id":{"type":"string","format":"uuid","title":"Regency Id","description":"ID of the parent regency"},"regency_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Regency Name","description":"Name of the parent regency"},"subdistrict_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Sub District Id","description":"ID of the sub-district where facility is located"},"sub_district_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sub District Name","description":"Name of the sub-district where facility is located"}},"type":"object","required":["id","name","type","latitude","longitude","regency_id"],"title":"FacilitySchema"},"FacilityType":{"type":"string","enum":["Hospital","Clinic","Puskesmas","Pustu"],"title":"FacilityType"},"GeographicLevel":{"type":"string","enum":["province","regency","subdistrict"],"title":"GeographicLevel"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HeatmapData":{"properties":{"regency_id":{"type":"string","format":"uuid","title":"Regency Id","description":"ID of the regency"},"regency_name":{"type":"string","title":"Regency Name","description":"Name of the regency"},"total_population":{"type":"integer","title":"Total Population","description":"Total population of the regency"},"population_outside_radius":{"type":"integer","title":"Population Outside Radius","description":"Population living outside service radius"},"service_radius_km":{"type":"number","title":"Service Radius Km","description":"Service radius in kilometers"},"heatmap_points":{"items":{"$ref":"#/components/schemas/HeatmapPoint"},"type":"array","title":"Heatmap Points","description":"Grid points for heatmap visualization"}},"type":"object","required":["regency_id","regency_name","total_population","population_outside_radius","service_radius_km","heatmap_points"],"title":"HeatmapData"},"HeatmapPoint":{"properties":{"latitude":{"type":"number","title":"Latitude","description":"Latitude coordinate"},"longitude":{"type":"number","title":"Longitude","description":"Longitude coordinate"},"population_density":{"type":"number","title":"Population Density","description":"Population density at this point"},"access_score":{"type":"number","title":"Access Score","description":"Health access score (0-1)"},"distance_to_facility":{"type":"number","title":"Distance To Facility","description":"Distance to nearest health facility in km"}},"type":"object","required":["latitude","longitude","population_density","access_score","distance_to_facility"],"title":"HeatmapPoint"},"LegacySimulationResponse":{"properties":{"regency_id":{"type":"string","format":"uuid","title":"Regency Id","description":"ID of the regency"},"regency_name":{"type":"string","title":"Regency Name","description":"Name of the regency"},"total_budget":{"type":"number","title":"Total Budget","description":"Total budget allocated"},"budget_used":{"type":"number","title":"Budget Used","description":"Budget actually used"},"facilities_recommended":{"type":"integer","title":"Facilities Recommended","description":"Number of facilities recommended"},"total_population_covered":{"type":"integer","title":"Total Population Covered","description":"Total population covered"},"coverage_percentage":{"type":"number","title":"Coverage Percentage","description":"Percentage of population covered"},"optimized_facilities":{"items":{"$ref":"#/components/schemas/OptimizedFacility"},"type":"array","title":"Optimized Facilities","description":"List of optimized facility locations"},"automated_reasoning":{"type":"string","title":"Automated Reasoning","description":"Automated reasoning explaining the greedy algorithm's decisions"}},"type":"object","required":["regency_id","regency_name","total_budget","budget_used","facilities_recommended","total_population_covered","coverage_percentage","optimized_facilities","automated_reasoning"],"title":"LegacySimulationResponse"},"OptimizedFacility":{"properties":{"latitude":{"type":"number","title":"Latitude","description":"Latitude of the facility location"},"longitude":{"type":"number","title":"Longitude","description":"Longitude of the facility location"},"subdistrict_id":{"type":"string","format":"uuid","title":"Sub District Id","description":"ID of the sub-district"},"sub_district_name":{"type":"string","title":"Sub District Name","description":"Name of the sub-district"},"estimated_cost":{"type":"number","title":"Estimated Cost","description":"Estimated cost of the facility"},"population_covered":{"type":"integer","title":"Population Covered","description":"Population covered by this facility"},"coverage_radius_km":{"type":"number","title":"Coverage Radius Km","description":"Coverage radius in kilometers"},"facility_type":{"$ref":"#/components/schemas/FacilityType","description":"Type of facility being recommended"}},"type":"object","required":["latitude","longitude","subdistrict_id","sub_district_name","estimated_cost","population_covered","coverage_radius_km","facility_type"],"title":"OptimizedFacility"},"PasswordChange":{"properties":{"current_password":{"type":"string","title":"Current Password"},"new_password":{"type":"string","title":"New Password"}},"type":"object","required":["current_password","new_password"],"title":"PasswordChange"},"PriorityScoreData":{"properties":{"regency_id":{"type":"string","format":"uuid","title":"Regency Id","description":"ID of the regency"},"regency_name":{"type":"string","title":"Regency Name","description":"Name of the regency"},"total_sub_districts":{"type":"integer","title":"Total Sub Districts","description":"Total number of sub-districts"},"sub_districts":{"items":{"$ref":"#/components/schemas/SubDistrictScore"},"type":"array","title":"Sub Districts","description":"Ranked list of sub-districts"}},"type":"object","required":["regency_id","regency_name","total_sub_districts","sub_districts"],"title":"PriorityScoreData"},"ProvinceListResponse":{"properties":{"provinces":{"items":{"$ref":"#/components/schemas/ProvinceSchema"},"type":"array","title":"Provinces"},"total":{"type":"integer","title":"Total","description":"Total number of provinces"}},"type":"object","required":["provinces","total"],"title":"ProvinceListResponse"},"ProvinceSchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id","description":"Unique identifier for the province"},"name":{"type":"string","title":"Name","description":"Name of the province"},"pum_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pum Code","description":"PUM code for the province (KDPPUM)"},"area_km2":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Area Km2","description":"Area in square kilometers"}},"type":"object","required":["id","name"],"title":"ProvinceSchema"},"Recommendation":{"properties":{"type":{"$ref":"#/components/schemas/FacilityType","description":"Type of facility being recommended"},"subdistrict_id":{"type":"string","format":"uuid","title":"Subdistrict Id","description":"ID of the subdistrict"},"location_name":{"type":"string","title":"Location Name","description":"Name of the location"},"coordinates":{"$ref":"#/components/schemas/Coordinates","description":"Geographic coordinates"},"estimated_cost":{"type":"number","title":"Estimated Cost","description":"Estimated cost of the facility"}},"type":"object","required":["type","subdistrict_id","location_name","coordinates","estimated_cost"],"title":"Recommendation"},"RegencyListResponse":{"properties":{"regencies":{"items":{"$ref":"#/components/schemas/RegencySchema"},"type":"array","title":"Regencies"},"total":{"type":"integer","title":"Total","description":"Total number of regencies"},"province_id":{"type":"string","format":"uuid","title":"Province Id","description":"ID of the province"}},"type":"object","required":["regencies","total","province_id"],"title":"RegencyListResponse"},"RegencySchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id","description":"Unique identifier for the regency"},"name":{"type":"string","title":"Name","description":"Name of the regency"},"pum_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pum Code","description":"PUM code for the regency (KDPKAB)"},"province_id":{"type":"string","format":"uuid","title":"Province Id","description":"ID of the parent province"},"province_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Province Name","description":"Name of the parent province"},"area_km2":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Area Km2","description":"Area in square kilometers"}},"type":"object","required":["id","name","province_id"],"title":"RegencySchema"},"ReportExportRequest":{"properties":{"report_type":{"type":"string","title":"Report Type","description":"Type of report to generate (simulation_results, priority_ranking, heatmap_analysis)"},"data":{"additionalProperties":true,"type":"object","title":"Data","description":"Data from analysis or simulation results"},"format":{"type":"string","title":"Format","description":"Output format (pdf, csv)","default":"pdf"}},"type":"object","required":["report_type","data"],"title":"ReportExportRequest"},"ReportExportResponse":{"properties":{"filename":{"type":"string","title":"Filename","description":"Generated filename"},"download_url":{"type":"string","title":"Download Url","description":"URL to download the generated report"},"file_size_bytes":{"type":"integer","title":"File Size Bytes","description":"Size of the generated file in bytes"},"generated_at":{"type":"string","format":"date-time","title":"Generated At","description":"Timestamp when report was generated"}},"type":"object","required":["filename","download_url","file_size_bytes","generated_at"],"title":"ReportExportResponse"},"SessionContext":{"properties":{"last_simulation_result":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Last Simulation Result","description":"Last simulation result for context"},"previous_messages":{"anyOf":[{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array"},{"type":"null"}],"title":"Previous Messages","description":"Previous user and bot messages for chatroom context","default":[]}},"type":"object","title":"SessionContext"},"SimulationRequest":{"properties":{"geographic_level":{"$ref":"#/components/schemas/GeographicLevel","description":"Geographic level of the area_ids"},"area_ids":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Area Ids","description":"List of area IDs at the specified geographic level"},"budget":{"type":"number","title":"Budget","description":"Total budget available for facility construction"},"facility_types":{"items":{"$ref":"#/components/schemas/FacilityType"},"type":"array","title":"Facility Types","description":"Types of facilities to consider"}},"type":"object","required":["geographic_level","area_ids","budget","facility_types"],"title":"SimulationRequest"},"SimulationResponse":{"properties":{"simulation_summary":{"$ref":"#/components/schemas/SimulationSummary","description":"Summary of simulation results"},"recommendations":{"items":{"$ref":"#/components/schemas/Recommendation"},"type":"array","title":"Recommendations","description":"List of facility recommendations"},"automated_reasoning":{"type":"string","title":"Automated Reasoning","description":"Automated reasoning explaining the greedy algorithm's decisions"}},"type":"object","required":["simulation_summary","recommendations","automated_reasoning"],"title":"SimulationResponse"},"SimulationSummary":{"properties":{"initial_coverage":{"type":"number","title":"Initial Coverage","description":"Initial population coverage percentage"},"projected_coverage":{"type":"number","title":"Projected Coverage","description":"Projected population coverage percentage after recommendations"},"coverage_increase_percent":{"type":"number","title":"Coverage Increase Percent","description":"Percentage increase in coverage"},"total_cost":{"type":"number","title":"Total Cost","description":"Total cost of all recommendations"},"budget_remaining":{"type":"number","title":"Budget Remaining","description":"Remaining budget after recommendations"}},"type":"object","required":["initial_coverage","projected_coverage","coverage_increase_percent","total_cost","budget_remaining"],"title":"SimulationSummary"},"StartChatResponse":{"properties":{"bot_response":{"type":"string","title":"Bot Response","description":"Initial chatbot greeting"},"recent_simulations":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Recent Simulations","description":"Recent simulation results for context","default":[]},"suggested_actions":{"items":{"$ref":"#/components/schemas/SuggestedAction"},"type":"array","title":"Suggested Actions","description":"List of suggested actions for the user","default":[]}},"type":"object","required":["bot_response"],"title":"StartChatResponse"},"SubDistrictDetails":{"properties":{"subdistrict_id":{"type":"string","format":"uuid","title":"Sub District Id","description":"ID of the sub-district"},"sub_district_name":{"type":"string","title":"Sub District Name","description":"Name of the sub-district"},"regency_id":{"type":"string","format":"uuid","title":"Regency Id","description":"ID of the parent regency"},"regency_name":{"type":"string","title":"Regency Name","description":"Name of the parent regency"},"population":{"type":"integer","title":"Population","description":"Total population"},"area_km2":{"type":"number","title":"Area Km2","description":"Area in square kilometers"},"population_density":{"type":"number","title":"Population Density","description":"Population density (people per km²)"},"poverty_rate":{"type":"number","title":"Poverty Rate","description":"Poverty rate as percentage"},"existing_facilities_count":{"type":"integer","title":"Existing Facilities Count","description":"Number of existing health facilities"},"existing_facilities":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Existing Facilities","description":"List of existing facilities"},"gap_factor":{"type":"number","title":"Gap Factor","description":"Gap factor score"},"efficiency_factor":{"type":"number","title":"Efficiency Factor","description":"Efficiency factor score"},"vulnerability_factor":{"type":"number","title":"Vulnerability Factor","description":"Vulnerability factor score"},"composite_score":{"type":"number","title":"Composite Score","description":"Composite priority score"},"rank":{"type":"integer","title":"Rank","description":"Ranking position"}},"type":"object","required":["subdistrict_id","sub_district_name","regency_id","regency_name","population","area_km2","population_density","poverty_rate","existing_facilities_count","existing_facilities","gap_factor","efficiency_factor","vulnerability_factor","composite_score","rank"],"title":"SubDistrictDetails"},"SubDistrictListResponse":{"properties":{"sub_districts":{"items":{"$ref":"#/components/schemas/SubDistrictSchema"},"type":"array","title":"Sub Districts"},"total":{"type":"integer","title":"Total","description":"Total number of sub-districts"},"regency_id":{"type":"string","format":"uuid","title":"Regency Id","description":"ID of the regency"}},"type":"object","required":["sub_districts","total","regency_id"],"title":"SubDistrictListResponse"},"SubDistrictSchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id","description":"Unique identifier for the sub-district"},"name":{"type":"string","title":"Name","description":"Name of the sub-district"},"pum_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pum Code","description":"PUM code for the sub-district (KDCPUM)"},"regency_id":{"type":"string","format":"uuid","title":"Regency Id","description":"ID of the parent regency"},"regency_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Regency Name","description":"Name of the parent regency"},"population_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Population Count","description":"Population count"},"poverty_level":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Poverty Level","description":"Poverty level as percentage"},"area_km2":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Area Km2","description":"Area in square kilometers"}},"type":"object","required":["id","name","regency_id"],"title":"SubDistrictSchema"},"SubDistrictScore":{"properties":{"subdistrict_id":{"type":"string","format":"uuid","title":"Sub District Id","description":"ID of the sub-district"},"sub_district_name":{"type":"string","title":"Sub District Name","description":"Name of the sub-district"},"gap_factor":{"type":"number","title":"Gap Factor","description":"Gap factor score"},"efficiency_factor":{"type":"number","title":"Efficiency Factor","description":"Efficiency factor score"},"vulnerability_factor":{"type":"number","title":"Vulnerability Factor","description":"Vulnerability factor score"},"composite_score":{"type":"number","title":"Composite Score","description":"Composite priority score"},"rank":{"type":"integer","title":"Rank","description":"Ranking position"}},"type":"object","required":["subdistrict_id","sub_district_name","gap_factor","efficiency_factor","vulnerability_factor","composite_score","rank"],"title":"SubDistrictScore"},"SuggestedAction":{"properties":{"action_type":{"type":"string","title":"Action Type","description":"Type of suggested action"},"description":{"type":"string","title":"Description","description":"Description of the action"},"parameters":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Parameters","description":"Parameters for the action"}},"type":"object","required":["action_type","description"],"title":"SuggestedAction"},"SummaryMetrics":{"properties":{"coverage_percentage":{"type":"number","title":"Coverage Percentage","description":"The proportion of the population covered by health facilities"},"average_distance_km":{"type":"number","title":"Average Distance Km","description":"Average distance to the nearest facility in kilometers"},"average_travel_time_hours":{"type":"number","title":"Average Travel Time Hours","description":"Average travel time to the nearest facility in hours"}},"type":"object","required":["coverage_percentage","average_distance_km","average_travel_time_hours"],"title":"SummaryMetrics"},"UserLocationUpdate":{"properties":{"location_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Address"}},"type":"object","title":"UserLocationUpdate","description":"Schema for updating user location"},"UserLogin":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"UserLogin"},"UserNameUpdate":{"properties":{"first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"}},"type":"object","title":"UserNameUpdate","description":"Schema for updating user name (first_name and last_name)"},"UserRegister":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"username":{"type":"string","title":"Username"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","username","first_name","last_name","password"],"title":"UserRegister"},"UserResponse":{"properties":{"id":{"type":"string","title":"Id"},"email":{"type":"string","format":"email","title":"Email"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"provider":{"type":"string","title":"Provider"},"is_active":{"type":"boolean","title":"Is Active"}},"type":"object","required":["id","email","provider","is_active"],"title":"UserResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}